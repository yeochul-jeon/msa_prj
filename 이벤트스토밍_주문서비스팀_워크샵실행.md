# 이벤트 스토밍 주문 서비스팀 워크샵 실행 가이드

> 이 문서는 [이벤트스토밍_주문서비스팀_가이드.md](./이벤트스토밍_주문서비스팀_가이드.md)의 보충 자료입니다.

---

## 7. 퍼실리테이터 실전 스크립트

### 7.1 워크샵 오프닝 스크립트

```
┌─────────────────────────────────────────────────────────────┐
│             주문 서비스팀 워크샵 오프닝 스크립트            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  "안녕하세요, 오늘 주문 서비스팀 이벤트 스토밍 워크샵을    │
│  진행할 [이름]입니다.                                      │
│                                                             │
│  시작하기 전에 오늘 워크샵에서 몇 가지 부탁드릴 점이       │
│  있습니다.                                                 │
│                                                             │
│  ① '주문 검증', '데이터 저장' 같은 내부 처리 단계가 아니라,│
│     '주문이 접수되었다', '결제가 완료되었다'처럼           │
│     고객이나 다른 팀이 알아야 하는 변화를 적어주세요.      │
│                                                             │
│  ② 결제팀, 상품팀, 물류팀 등 다른 팀과 주고받는 이벤트는  │
│     '누가 발행하는가'를 명확히 해주세요.                   │
│     결제 상태는 결제팀, 주문 상태는 우리 팀이 관리합니다.  │
│                                                             │
│  ③ '결제 실패'를 하나로 뭉치지 말고,                       │
│     원인별로 구분해주세요. 잔액 부족, 카드 오류, 타임아웃  │
│     각각 후속 처리가 다르니까요.                           │
│                                                             │
│  ④ 동시 주문, 재고 경쟁 같은 어려운 상황은                 │
│     핫스팟(분홍색)으로 표시해두면 됩니다.                  │
│     완벽하게 해결하려고 하지 않아도 됩니다.                │
│                                                             │
│  완벽한 정답은 없습니다. 모르는 건 핫스팟으로 표시하면     │
│  됩니다. 편하게 진행해주세요!"                             │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 7.2 상황별 개입 스크립트

#### "이건 결제팀 이벤트 아닌가요?"

```
┌─────────────────────────────────────────────────────────────┐
│     상황: 결제 관련 이벤트 소유권에 대한 질문               │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  대응:                                                     │
│  "좋은 질문입니다! 소유권을 구분해봅시다.                  │
│                                                             │
│  '결제가 승인되었다'는 결제팀 이벤트입니다.                │
│  결제 상태를 변경하는 건 결제팀이니까요.                   │
│                                                             │
│  하지만 주문팀에서는 이 이벤트를 '수신'해서                │
│  '주문 결제가 완료되었다'라는 우리 이벤트를 발행합니다.    │
│                                                             │
│  이게 왜 중요하냐면,                                       │
│  우리 이벤트를 물류팀이 기다리고 있거든요.                 │
│  배송 프로세스를 시작하려면요.                             │
│                                                             │
│  정리하면:                                                 │
│  • 결제팀: '결제가 승인되었다' (결제 상태)                │
│  • 주문팀: '주문 결제가 완료되었다' (주문 상태)           │
│                                                             │
│  둘 다 적어두면 됩니다.                                    │
│  결제팀 이벤트는 연두색 외부 시스템으로 표시하고요."       │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### "재고 차감은 상품팀 일인데요?"

```
┌─────────────────────────────────────────────────────────────┐
│     상황: 재고 관련 이벤트 소유권에 대한 질문               │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  대응:                                                     │
│  "맞습니다. 재고 상태는 상품팀이 관리합니다.               │
│                                                             │
│  주문팀 관점에서 적어야 할 건:                             │
│  • '재고 확보가 요청되었다' - 우리가 상품팀에 요청         │
│  • '재고가 확보되었다' - 상품팀에서 응답 (외부 이벤트)    │
│  • '재고가 부족하다' - 상품팀에서 응답 (외부 이벤트)      │
│                                                             │
│  우리가 '재고를 차감한다'가 아니라,                        │
│  '재고 확보를 요청하고, 결과를 받는다'입니다.              │
│                                                             │
│  이렇게 표현해볼까요?                                      │
│  ┌──────────────────────────────────────────────────────┐  │
│  │  주문팀                    🟩 상품팀                 │  │
│  │                                                       │  │
│  │  🟧 재고 확보 요청됨  ──→   재고 확인/차감          │  │
│  │                              │                        │  │
│  │  🟧 재고 확보됨      ←──   결과 응답                │  │
│  │  또는                                                 │  │
│  │  🟧 재고 부족함                                      │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                             │
│  상품팀의 응답은 외부 시스템(연두색)으로 표시해주세요."    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### "실패 케이스가 너무 많아요"

```
┌─────────────────────────────────────────────────────────────┐
│     상황: 실패 케이스 세분화에 대한 질문                    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  대응:                                                     │
│  "실패 케이스가 많은 건 자연스러운 겁니다.                 │
│  다 적을 필요는 없어요.                                    │
│                                                             │
│  기준은 '후속 처리가 다른가?'입니다.                       │
│                                                             │
│  예를 들어 결제 실패:                                      │
│  • 잔액 부족 → '다른 카드 사용' 안내                       │
│  • 카드 한도 초과 → '한도 증액' 또는 '분할 결제' 안내     │
│  • 카드 번호 오류, CVC 오류, 유효기간 오류                 │
│    → 전부 '결제 정보 재입력' 안내                          │
│                                                             │
│  마지막 세 가지는 같은 처리니까 하나로 묶어도 됩니다:      │
│  '결제가 거부되었다 (결제 정보 오류)'                      │
│                                                             │
│  결과적으로:                                               │
│  1. 결제가 거부되었다 (잔액/한도 문제)                     │
│  2. 결제가 거부되었다 (카드 상태 문제)                     │
│  3. 결제가 거부되었다 (결제 정보 오류)                     │
│  4. 결제가 타임아웃되었다                                  │
│                                                             │
│  이 정도면 충분합니다.                                     │
│  10개를 다 적을 필요 없어요."                              │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### "쿠폰 적용도 이벤트인가요?"

```
┌─────────────────────────────────────────────────────────────┐
│     상황: 쿠폰/할인 적용이 이벤트인지 정책인지 질문         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  대응:                                                     │
│  "좋은 질문입니다. 두 가지 경우를 구분해야 해요.           │
│                                                             │
│  1. 고객이 쿠폰 코드를 입력해서 적용하는 경우              │
│     → 이벤트입니다 🟧                                      │
│     '쿠폰이 적용되었다'                                    │
│     고객의 행동이 있고, 금액이 변경되니까요.               │
│                                                             │
│  2. VIP 5% 할인처럼 자동으로 적용되는 경우                 │
│     → 정책입니다 💜                                        │
│     'VIP 회원은 5% 추가 할인'                              │
│     시스템이 자동으로 계산하는 규칙이니까요.               │
│                                                             │
│  정리하면:                                                 │
│  • 고객이 명시적으로 뭔가를 한다 → 이벤트                  │
│  • 시스템이 자동으로 적용한다 → 정책                       │
│                                                             │
│  이 쿠폰은 어떤 경우인가요?"                               │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### "동시 주문 상황은 어떻게 표현하죠?"

```
┌─────────────────────────────────────────────────────────────┐
│     상황: 동시성/경쟁 상황 표현 방법 질문                   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  대응:                                                     │
│  "동시 주문으로 재고 경쟁이 발생하는 상황이죠?             │
│                                                             │
│  이건 핫스팟(분홍색)으로 표시하는 게 좋습니다.             │
│  워크샵에서 완벽하게 해결하기 어렵거든요.                  │
│                                                             │
│  이렇게 표현해볼게요:                                      │
│  ┌──────────────────────────────────────────────────────┐  │
│  │  🟧 주문이 접수되었다 (A)                            │  │
│  │  🟧 주문이 접수되었다 (B)                            │  │
│  │         │              │                             │  │
│  │         └──────┬───────┘                             │  │
│  │                │                                      │  │
│  │                ▼                                      │  │
│  │        🩷 "동시 주문 시                               │  │
│  │           재고 경쟁 발생"                             │  │
│  │                │                                      │  │
│  │         ┌──────┴──────┐                              │  │
│  │         ▼             ▼                              │  │
│  │  🟧 재고 확보됨(A)  🟧 재고 부족(B)                  │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                             │
│  핫스팟에 어떤 정책이 필요한지 적어두세요:                 │
│  • 선착순 처리?                                            │
│  • 큐잉 처리?                                              │
│  • 재고 분배?                                              │
│                                                             │
│  설계 단계에서 자세히 다루면 됩니다."                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### "부분 환불은 어떻게 나누나요?"

```
┌─────────────────────────────────────────────────────────────┐
│     상황: 복합 상황(부분 환불) 표현 방법 질문               │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  대응:                                                     │
│  "부분 환불은 하나의 이벤트로 표현하되,                    │
│  데이터에 '무엇이' 환불되는지 포함하면 됩니다.             │
│                                                             │
│  '부분 환불이 요청되었다'                                  │
│  - 대상 상품: [상품 A]                                     │
│  - 환불 금액: 10,000원                                     │
│  - 환불 사유: 상품 불량                                    │
│                                                             │
│  '부분 환불이 완료되었다'                                  │
│  - 환불 금액: 10,000원                                     │
│  - 잔여 주문 금액: 20,000원                                │
│  - 주문 상태: '부분 환불됨'                                │
│                                                             │
│  여기서 복잡한 건 핫스팟으로 표시해두세요:                 │
│  🩷 '복합 결제(카드+포인트) 부분 환불 시 비율 계산'        │
│  🩷 '묶음 배송 상품 중 일부 환불 시 배송비 처리'          │
│  🩷 '부분 환불 시 쿠폰 할인 금액 재계산'                  │
│                                                             │
│  이런 세부 규칙은 설계 단계에서 정하면 됩니다."            │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 7.3 이벤트 도출 유도 질문 리스트

#### 주문 관련 질문

```
□ "고객이 처음 주문을 시작하면 무슨 일이 일어나나요?"
□ "주문이 접수되면 어떤 팀이 알아야 하나요?"
□ "주문 상태가 어떤 단계로 변하나요?"
□ "주문이 실패할 수 있는 상황은 무엇인가요?"
□ "고객이 주문 상태를 확인할 때 어떤 상태들이 보이나요?"
□ "주문 확정 조건은 무엇인가요?"
□ "묶음 주문은 어떻게 처리하나요?"
```

#### 결제 관련 질문

```
□ "결제 수단은 몇 가지 있나요?"
□ "결제가 성공하면 다음에 무슨 일이 일어나나요?"
□ "결제가 실패할 수 있는 원인은 무엇인가요?"
□ "각 실패 원인에 따라 처리가 다른가요?"
□ "결제 대기 중 타임아웃은 언제 발생하나요?"
□ "복합 결제(카드+포인트)는 어떻게 처리하나요?"
□ "결제 완료 후 고객에게 어떤 알림이 가나요?"
```

#### 배송 관련 질문

```
□ "결제 완료 후 배송 요청은 자동인가요, 수동인가요?"
□ "출고와 배송 시작의 차이는 무엇인가요?"
□ "배송 상태 업데이트는 어떻게 받나요?"
□ "배송이 실패하면 어떻게 되나요?"
□ "배송 중에 배송지 변경이 가능한가요?"
□ "묶음 배송과 개별 배송은 어떻게 구분하나요?"
```

#### 취소/환불 관련 질문

```
□ "주문 취소가 가능한 시점은 언제인가요?"
□ "배송 전 취소와 배송 후 환불의 프로세스가 다른가요?"
□ "취소 시 재고는 어떻게 되나요?"
□ "환불 시 쿠폰이나 포인트는 어떻게 처리하나요?"
□ "부분 환불은 가능한가요?"
□ "환불 금액은 어떻게 계산하나요?"
```

#### 프로모션 관련 질문

```
□ "쿠폰 적용은 어떻게 검증하나요?"
□ "쿠폰 중복 사용이 가능한가요?"
□ "자동으로 적용되는 할인이 있나요?"
□ "할인 금액 상한이 있나요?"
□ "취소 시 쿠폰 복원은 어떻게 되나요?"
```

---

## 8. 워크샵 타임라인 및 템플릿

### 8.1 주문 서비스팀 워크샵 타임라인 (2.5시간)

```
┌─────────────────────────────────────────────────────────────┐
│           주문 서비스팀 부서별 워크샵 타임라인              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  시간       Phase                활동              소요     │
│  ─────────────────────────────────────────────────────────  │
│  00:00-00:15  오프닝              주문팀 특화       15분    │
│                                   주의사항 공유             │
│                                   (연동, 소유권, 실패)      │
│  ─────────────────────────────────────────────────────────  │
│  00:15-00:25  개념 설명           이벤트 vs 내부    10분    │
│                                   처리 구분                 │
│  ─────────────────────────────────────────────────────────  │
│  00:25-01:00  이벤트 도출         도메인 이벤트     35분    │
│                                   브레인스토밍              │
│                                   (주문/결제/배송/취소)     │
│  ─────────────────────────────────────────────────────────  │
│  01:00-01:10  휴식                -                 10분    │
│  ─────────────────────────────────────────────────────────  │
│  01:10-01:35  타임라인 정렬       시간순 배치       25분    │
│                                   (주문→결제→배송→완료)    │
│  ─────────────────────────────────────────────────────────  │
│  01:35-01:55  요소 추가           커맨드/액터       20분    │
│                                   (고객/시스템/관리자)      │
│  ─────────────────────────────────────────────────────────  │
│  01:55-02:10  요소 추가           애그리게잇/정책   15분    │
│                                   (주문서/결제/배송)        │
│  ─────────────────────────────────────────────────────────  │
│  02:10-02:25  연동 식별           상품팀/결제팀/    15분    │
│                                   물류팀/회원팀 연동        │
│  ─────────────────────────────────────────────────────────  │
│  02:25-02:30  마무리              정리 및 다음      5분     │
│                                   단계 안내                 │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 8.2 주문 서비스팀 결과물 템플릿

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
주문 서비스팀 워크샵 결과 보고서
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

■ 기본 정보
- 팀명: 주문 서비스팀
- 일시: [                    ]
- 참석자: [                    ]

■ 도메인별 이벤트 목록

[주문 생성]
1. [                    ]
2. [                    ]
3. [                    ]

[결제 연동]
1. [                    ]
2. [                    ]
3. [                    ]

[재고 연동]
1. [                    ]
2. [                    ]

[배송 연동]
1. [                    ]
2. [                    ]
3. [                    ]

[취소/환불]
1. [                    ]
2. [                    ]
3. [                    ]

[프로모션/할인]
1. [                    ]
2. [                    ]

[정산]
1. [                    ]
2. [                    ]

[회원 연동]
1. [                    ]
2. [                    ]

■ 실패/예외 케이스 목록

[결제 실패]
┌───────────────────────┬──────────────────────────┐
│ 실패 유형             │ 후속 처리                │
├───────────────────────┼──────────────────────────┤
│ 잔액/한도 문제        │                          │
├───────────────────────┼──────────────────────────┤
│ 카드 상태 문제        │                          │
├───────────────────────┼──────────────────────────┤
│ 결제 정보 오류        │                          │
├───────────────────────┼──────────────────────────┤
│ 타임아웃              │                          │
└───────────────────────┴──────────────────────────┘

[취소 유형]
┌───────────────────────┬──────────────────────────┐
│ 취소 사유             │ 후속 처리                │
├───────────────────────┼──────────────────────────┤
│ 고객 요청             │                          │
├───────────────────────┼──────────────────────────┤
│ 재고 부족             │                          │
├───────────────────────┼──────────────────────────┤
│ 결제 실패             │                          │
├───────────────────────┼──────────────────────────┤
│ 배송 불가             │                          │
└───────────────────────┴──────────────────────────┘

■ 외부 팀 연동

[입력 - 다른 팀에서 받는 것]
┌────────────┬───────────────┬──────────────────┐
│ 제공 팀     │ 이벤트명      │ 데이터 항목      │
├────────────┼───────────────┼──────────────────┤
│ 상품팀     │               │                  │
├────────────┼───────────────┼──────────────────┤
│ 결제팀     │               │                  │
├────────────┼───────────────┼──────────────────┤
│ 물류팀     │               │                  │
├────────────┼───────────────┼──────────────────┤
│ 회원팀     │               │                  │
├────────────┼───────────────┼──────────────────┤
│ 프로모션팀 │               │                  │
└────────────┴───────────────┴──────────────────┘

[출력 - 다른 팀에 보내는 것]
┌────────────┬───────────────┬──────────────────┐
│ 수신 팀     │ 이벤트명      │ 데이터 항목      │
├────────────┼───────────────┼──────────────────┤
│ 상품팀     │               │                  │
├────────────┼───────────────┼──────────────────┤
│ 결제팀     │               │                  │
├────────────┼───────────────┼──────────────────┤
│ 물류팀     │               │                  │
├────────────┼───────────────┼──────────────────┤
│ 회원팀     │               │                  │
├────────────┼───────────────┼──────────────────┤
│ 프로모션팀 │               │                  │
└────────────┴───────────────┴──────────────────┘

■ 동시성 이슈 핫스팟

[동시성 발생 지점]
┌──────────────────────┬───────────────────────────────┐
│ 상황                  │ 고려 필요 사항                │
├──────────────────────┼───────────────────────────────┤
│ 동시 주문 재고 경쟁  │                               │
├──────────────────────┼───────────────────────────────┤
│ 쿠폰 동시 사용       │                               │
├──────────────────────┼───────────────────────────────┤
│ 포인트 동시 사용     │                               │
├──────────────────────┼───────────────────────────────┤
│ [              ]     │                               │
└──────────────────────┴───────────────────────────────┘

■ 기타 핫스팟 (추가 논의 필요)

1. [                    ]
2. [                    ]
3. [                    ]

■ 잠정 컨텍스트 후보 (통합 워크샵에서 확정)

- [                    ]
- [                    ]

■ 첨부: 화이트보드 사진

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## 9. FAQ 및 트러블슈팅

### 9.1 자주 묻는 질문

#### Q1: 결제 완료 이벤트는 결제팀 것 아닌가요?

```
┌─────────────────────────────────────────────────────────────┐
│    Q: 결제 완료 이벤트는 결제팀 것 아닌가요?               │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  A: 둘 다 맞습니다. 관점에 따라 다른 이벤트입니다.         │
│                                                             │
│  결제팀:                                                   │
│  • 🟧 "결제가 승인되었다" (결제팀 발행)                   │
│  • 결제 상태를 관리하는 주체                               │
│  • 승인번호, 결제금액, 결제수단 등 결제 상세 정보 포함     │
│                                                             │
│  주문팀:                                                   │
│  • 🟧 "주문 결제가 완료되었다" (주문팀 발행)              │
│  • 결제팀의 이벤트를 수신하여 발행                         │
│  • 주문 상태를 "결제 완료"로 변경                          │
│  • 물류팀 등 다른 팀에 알림                                │
│                                                             │
│  핵심 원칙:                                                │
│  "상태를 변경하는 주체가 이벤트를 발행한다"                │
│  • 결제 상태 → 결제팀                                     │
│  • 주문 상태 → 주문팀                                     │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### Q2: 재고 연동은 실시간인가요, 배치인가요?

```
┌─────────────────────────────────────────────────────────────┐
│    Q: 재고 연동은 실시간인가요, 배치인가요?                │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  A: 이벤트 스토밍에서는 비즈니스 요구사항으로 판단합니다.  │
│                                                             │
│  실시간이 필요한 경우:                                     │
│  • 재고가 매우 빠르게 변동하는 상품 (한정판 등)            │
│  • "품절" 표시가 즉시 반영되어야 하는 경우                 │
│  • 동시 주문 경쟁이 발생하는 경우                          │
│                                                             │
│  배치로 충분한 경우:                                       │
│  • 재고가 충분하고 변동이 적은 상품                        │
│  • 약간의 오차가 허용되는 경우                             │
│                                                             │
│  워크샵에서:                                               │
│  • 이벤트는 동일하게 "재고가 확보되었다"                  │
│  • 실시간/배치 구분은 🩷 핫스팟으로 표시                   │
│  • 예: 🩷 "실시간 재고 vs 배치 재고 동기화 타이밍"        │
│                                                             │
│  기술적 구현은 설계 단계에서 결정합니다.                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### Q3: 부분 환불은 어떻게 여러 이벤트로 나누나요?

```
┌─────────────────────────────────────────────────────────────┐
│    Q: 부분 환불은 어떻게 여러 이벤트로 나누나요?           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  A: 부분 환불은 "하나의 이벤트"로 표현하되,               │
│     대상 정보를 포함합니다.                                │
│                                                             │
│  ✅ 권장 표현:                                             │
│  • 🟧 "부분 환불이 요청되었다"                            │
│    - 대상 상품: [상품 A]                                   │
│    - 환불 금액: 10,000원                                   │
│                                                             │
│  • 🟧 "부분 환불이 완료되었다"                            │
│    - 환불 금액: 10,000원                                   │
│    - 잔여 주문 금액: 20,000원                              │
│                                                             │
│  ❌ 피해야 할 표현:                                        │
│  • "상품 A 환불됨", "상품 B 환불됨" 처럼 상품별 분리      │
│  • 부분 환불은 비즈니스 관점에서 "하나의 환불 처리"       │
│                                                             │
│  복잡한 규칙은 핫스팟으로:                                 │
│  • 🩷 "복합 결제 부분 환불 시 비율 계산"                  │
│  • 🩷 "부분 환불 시 할인 금액 재계산"                     │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### Q4: 동시 주문 경쟁 상황은 어떻게 표현하나요?

```
┌─────────────────────────────────────────────────────────────┐
│    Q: 동시 주문 경쟁 상황은 어떻게 표현하나요?             │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  A: 핫스팟(🩷)으로 표시하고, 발생 가능한 결과를            │
│     분기로 표현합니다.                                     │
│                                                             │
│  표현 예시:                                                │
│  ┌──────────────────────────────────────────────────────┐  │
│  │  🟧 주문이 접수되었다 (A고객)                        │  │
│  │  🟧 주문이 접수되었다 (B고객) ─┐                     │  │
│  │          │                     │                     │  │
│  │          └─────────┬───────────┘                     │  │
│  │                    │                                  │  │
│  │            🩷 "동시 주문 시                           │  │
│  │               재고 경쟁 발생"                         │  │
│  │                    │                                  │  │
│  │           ┌────────┴────────┐                        │  │
│  │           ▼                 ▼                        │  │
│  │  🟧 재고 확보됨 (A)   🟧 재고 부족 (B)              │  │
│  │           │                 │                        │  │
│  │           ▼                 ▼                        │  │
│  │  주문 진행            🟧 주문이 취소됨              │  │
│  │                         (재고 부족)                  │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                             │
│  핫스팟에 기록할 내용:                                     │
│  • 선착순 처리 정책?                                       │
│  • 낙관적 락 vs 비관적 락?                                │
│  • 재시도 허용?                                            │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### Q5: 정산 배치는 이벤트로 적어야 하나요?

```
┌─────────────────────────────────────────────────────────────┐
│    Q: 정산 배치는 이벤트로 적어야 하나요?                  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  A: "배치 실행" 자체는 이벤트 아니지만,                    │
│     "배치 결과"는 이벤트입니다.                            │
│                                                             │
│  ❌ 이벤트 아님:                                           │
│  • "정산 배치가 실행되었다"                                │
│  • "야간 배치가 시작되었다"                                │
│  → 너무 추상적, 비즈니스 의미 없음                         │
│                                                             │
│  ✅ 이벤트 맞음:                                           │
│  • "일별 정산이 완료되었다"                                │
│  • "판매자 정산금이 확정되었다"                            │
│  • "수수료 계산이 완료되었다"                              │
│  → 구체적인 비즈니스 결과                                  │
│                                                             │
│  판단 질문:                                                │
│  "이 배치로 무엇이 변경되었나요?"                          │
│  "배치 결과를 누가 알아야 하나요?"                         │
│                                                             │
│  변경된 것, 알아야 하는 것 = 이벤트                        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 9.2 트러블슈팅

#### 상황 1: 결제팀/상품팀/물류팀 이벤트 소유권 논쟁

```
┌─────────────────────────────────────────────────────────────┐
│  상황 1: 이벤트 소유권 논쟁이 발생할 때                    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  증상:                                                     │
│  "이건 우리 이벤트 아니에요, 결제팀 이벤트잖아요"          │
│  "재고 차감은 상품팀이 하는 거 아닌가요?"                  │
│                                                             │
│  대응:                                                     │
│                                                             │
│  1. 소유권 원칙 설명:                                      │
│     "상태를 변경하는 주체가 이벤트를 발행합니다.           │
│      결제 상태는 결제팀, 주문 상태는 주문팀이 관리하죠."   │
│                                                             │
│  2. 양쪽 이벤트 모두 기록:                                 │
│     "둘 다 적어도 됩니다. 외부 팀 이벤트는 연두색으로,     │
│      우리 팀 이벤트는 오렌지색으로 표시하면 됩니다."       │
│                                                             │
│  3. 연동 관점으로 전환:                                    │
│     "우리가 '발행'하는 건지 '수신'하는 건지 구분해봅시다.  │
│      결제팀이 '결제 승인' 발행 → 우리가 수신              │
│      우리가 '주문 결제 완료' 발행 → 물류팀이 수신"        │
│                                                             │
│  4. 핫스팟으로 표시하고 넘어가기:                          │
│     "소유권이 불명확하면 핫스팟으로 표시해두고,            │
│      통합 워크샵에서 다른 팀과 함께 정하면 됩니다."        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### 상황 2: 실패 케이스가 너무 많아서 진행이 안 될 때

```
┌─────────────────────────────────────────────────────────────┐
│  상황 2: 실패 케이스가 너무 많아서 진행이 안 될 때         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  증상:                                                     │
│  "결제 실패 원인이 20가지인데 다 적어야 하나요?"          │
│  "예외 케이스까지 생각하면 끝이 없어요"                    │
│                                                             │
│  대응:                                                     │
│                                                             │
│  1. 그룹화 기준 제시:                                      │
│     "후속 처리가 같은 것들은 하나로 묶으면 됩니다.         │
│      예: 카드 번호 오류, CVC 오류, 유효기간 오류           │
│      → 전부 '결제 정보 재입력' 안내                        │
│      → '결제가 거부되었다 (결제 정보 오류)'로 통합"        │
│                                                             │
│  2. 80/20 규칙 적용:                                       │
│     "자주 발생하는 핵심 실패 케이스 5개만 먼저 적어봅시다. │
│      나머지는 '기타 실패'로 묶거나 핫스팟으로 표시해요."   │
│                                                             │
│  3. 우선순위 정하기:                                       │
│     "어떤 실패가 가장 자주 발생하나요?                     │
│      어떤 실패가 고객 이탈에 가장 큰 영향을 주나요?        │
│      그것부터 적어봅시다."                                 │
│                                                             │
│  4. 시간 제한 설정:                                        │
│     "실패 케이스는 10분만 쓰겠습니다.                      │
│      나머지는 핫스팟에 '추가 실패 케이스 정의 필요'로     │
│      표시해두고 넘어갑시다."                               │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### 상황 3: 비즈니스 규칙(정책)과 이벤트 구분이 안 될 때

```
┌─────────────────────────────────────────────────────────────┐
│  상황 3: 비즈니스 규칙과 이벤트 구분이 안 될 때            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  증상:                                                     │
│  "VIP 할인이 적용됐는데 이건 이벤트인가요?"                │
│  "'10만원 이상 무료배송'은 어떻게 표현하죠?"               │
│                                                             │
│  대응:                                                     │
│                                                             │
│  1. 구분 기준 설명:                                        │
│     "두 가지로 구분합니다:                                 │
│      • 고객이 명시적으로 뭔가를 했다 → 이벤트 🟧           │
│      • 시스템이 자동으로 적용했다 → 정책 💜"               │
│                                                             │
│  2. 예시로 설명:                                           │
│     "쿠폰 코드 입력 → 고객 행동 → 🟧 '쿠폰이 적용됨'      │
│      VIP 자동 할인 → 시스템 규칙 → 💜 'VIP 5% 할인'"      │
│                                                             │
│  3. 질문으로 유도:                                         │
│     "이 할인은 고객이 뭔가를 해서 적용된 건가요,           │
│      아니면 시스템이 알아서 적용하는 건가요?"              │
│                                                             │
│  4. 정책의 트리거 확인:                                    │
│     "정책은 항상 어떤 이벤트에 의해 트리거됩니다.          │
│      '주문이 접수되었다' → 💜 'VIP 할인 적용'              │
│      정책을 이벤트 다음에 배치해주세요."                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### 상황 4: 복합 상품/복합 결제 표현이 어려울 때

```
┌─────────────────────────────────────────────────────────────┐
│  상황 4: 복합 상품/복합 결제 표현이 어려울 때              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  증상:                                                     │
│  "묶음 배송 상품은 어떻게 표현하죠?"                       │
│  "카드+포인트 복합 결제는요?"                              │
│  "부분 배송은요?"                                          │
│                                                             │
│  대응:                                                     │
│                                                             │
│  1. 고객 관점으로 단순화:                                  │
│     "고객이 보는 건 '하나의 주문', '하나의 결제'입니다.    │
│      내부적으로 복잡해도 이벤트는 단순하게:                │
│      🟧 '주문이 접수되었다' (묶음 주문 포함)              │
│      🟧 '결제가 완료되었다' (복합 결제 포함)"              │
│                                                             │
│  2. 복잡한 규칙은 핫스팟으로:                              │
│     "세부 처리 규칙은 핫스팟에 기록해두세요:               │
│      🩷 '묶음 배송 가능 여부 판단 기준'                   │
│      🩷 '복합 결제 실패 시 롤백 순서'                     │
│      🩷 '부분 배송 시 송장 분리 처리'"                    │
│                                                             │
│  3. 예외 케이스 분리:                                      │
│     "정상 흐름을 먼저 그리고,                              │
│      복잡한 예외는 별도 영역에 표시합시다.                 │
│      '부분 배송 흐름', '부분 환불 흐름' 이렇게요."         │
│                                                             │
│  4. 설계 단계로 미루기:                                    │
│     "복합 처리의 세부 규칙은 설계 단계에서 정하면 됩니다.  │
│      지금은 '무슨 일이 일어나는가'에 집중합시다."          │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 10. 참고 문서

> 이 가이드는 기존 이벤트 스토밍 문서들과 함께 사용됩니다.

### 주문 서비스팀 가이드 시리즈

- **[이벤트스토밍_주문서비스팀_가이드.md](./이벤트스토밍_주문서비스팀_가이드.md)**: 핵심 판단 기준, 어려운 상황 TOP 12, 흔한 실수
- **[이벤트스토밍_주문서비스팀_도메인예시.md](./이벤트스토밍_주문서비스팀_도메인예시.md)**: 8개 도메인별 이벤트 예시, 연동 지점 매핑
- **이 문서**: 퍼실리테이터 스크립트, 타임라인, FAQ

### 기본 참고 문서

- **[이벤트스토밍_워크샵_계획서.md](./이벤트스토밍_워크샵_계획서.md)**: 전체 워크샵 목적, 성공 기준, 준비물 체크리스트
- **[이벤트스토밍_부서별워크샵_가이드.md](./이벤트스토밍_부서별워크샵_가이드.md)**: 부서별 워크샵 프로세스, 타임라인, 템플릿
- **[이벤트스토밍_단계별_실행가이드.md](./이벤트스토밍_단계별_실행가이드.md)**: Phase별 상세 진행 방법, 퍼실리테이터 스크립트
- **[이벤트스토밍_시각화_가이드.md](./이벤트스토밍_시각화_가이드.md)**: 포스트잇 색상 체계, 다이어그램 패턴
- **[이벤트스토밍_퀵레퍼런스.md](./이벤트스토밍_퀵레퍼런스.md)**: 빠른 참조, 용어집, 일반 도메인별 예시

### 다른 팀 가이드 (참고용)

- **[이벤트스토밍_프론트엔드팀_가이드.md](./이벤트스토밍_프론트엔드팀_가이드.md)**: 프론트엔드팀 특화 가이드
- **[이벤트스토밍_검색서비스팀_가이드.md](./이벤트스토밍_검색서비스팀_가이드.md)**: 검색팀 특화 가이드

---

*이 문서는 주문 서비스 개발팀 이벤트 스토밍 워크샵을 실제로 진행하는 퍼실리테이터를 위해 작성되었습니다. 상황별 대응 스크립트, 타임라인, 결과물 템플릿을 활용하여 효과적인 워크샵을 진행하세요.*
