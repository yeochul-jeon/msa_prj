# 이벤트 스토밍 단계별 실행 가이드

## Phase 0: 워크샵 시작 전 (D-7일)

### 체크리스트
- [ ] 회의실 예약 (넓은 공간, 벽면 활용 가능)
- [ ] 참석자 일정 확인 및 초대
- [ ] 준비물 구매 (포스트잇, 마커 등)
- [ ] 사전 안내 메일 발송
- [ ] 현재 시스템 자료 수집

### 사전 안내 메일 템플릿
```
제목: [필독] MSA 전환 - 도메인 이벤트 스토밍 워크샵 안내

안녕하세요,

MSA 전환 프로젝트의 첫 단계로 도메인 이벤트 스토밍 워크샵을 진행합니다.

■ 일시: YYYY-MM-DD 09:00-17:30
■ 장소: [회의실명]
■ 참석자: 각 부서 팀장 및 선임급

■ 워크샵 목적:
- 현재 시스템의 비즈니스 프로세스를 시각화
- 마이크로서비스 분리를 위한 도메인 경계 식별
- 부서 간 업무 흐름 통합 이해

■ 준비사항:
- 편한 복장 (포스트잇 붙이기 등 활동적인 워크샵)
- 본인 부서의 주요 업무 프로세스 숙지
- 노트북/태블릿 (선택사항)

많은 참여 부탁드립니다.
```

---

## Phase 1: 오프닝 (30분)

### 1.1 환영 인사 (5분)
**스크립트 예시:**
> "안녕하세요. 오늘 이벤트 스토밍 워크샵을 진행할 [이름]입니다.
> 오늘은 우리가 운영하는 시스템을 새로운 시각으로 바라보고,
> 함께 도메인을 이해하는 시간을 가지겠습니다."

### 1.2 아이스브레이킹 (10분)
**활동: "내 시스템 한 문장으로"**
- 각자 자기 부서의 시스템을 한 문장으로 소개
- 포스트잇에 적어서 화이트보드에 붙이기
- 긴장 완화 및 도메인 개괄 파악

### 1.3 워크샵 목표 공유 (15분)
**설명할 내용:**
1. MSA 전환이 필요한 이유
2. 이벤트 스토밍이 무엇인지
3. 오늘의 목표: 도메인 시각화 및 경계 식별
4. 그라운드 룰:
   - 정답은 없다
   - 모든 의견은 가치있다
   - 질문을 두려워하지 말 것
   - 핫스팟(분홍 포스트잇)으로 나중에 논의

---

## Phase 2: 이벤트 스토밍 개념 설명 (30분)

### 2.1 도메인 이벤트란? (10분)

**설명 포인트:**
- 이벤트 = 시스템에서 일어나는 "의미있는 일"
- 과거형으로 표현 (예: "주문이 완료되었다", "결제가 승인되었다")
- 비즈니스적으로 의미있는 상태 변화

**좋은 예시:**
```
✓ 회원가입이 완료되었다
✓ 주문이 취소되었다
✓ 재고가 부족해졌다
✓ 배송이 시작되었다
```

**나쁜 예시:**
```
✗ 버튼을 클릭했다 (기술적)
✗ DB에 저장했다 (구현 상세)
✗ 로그인 (명사형)
```

### 2.2 포스트잇 색상 설명 (10분)

**색상별 의미 시연:**

| 색상 | 의미 | 예시 |
|------|------|------|
| 🟧 오렌지 | 도메인 이벤트 | "주문이 접수되었다" |
| 🟦 파란색 | 커맨드 (명령) | "주문하기" |
| 🟨 노란색 | 애그리게잇 (데이터) | "주문서" |
| 💜 연보라 | 정책/규칙 | "재고 < 10이면 알림" |
| 🩷 분홍색 | 핫스팟 (이슈) | "배송지연 문제" |
| 🟩 연두색 | 외부 시스템 | "PG사 결제 API" |

### 2.3 미니 실습 (10분)

**간단한 시나리오로 시연:**
- "온라인 쇼핑몰에서 상품 구매" 프로세스
- 함께 이벤트 2-3개 도출해보기
- 실제 포스트잇 붙이는 방법 시연

**시연 예시:**
```
고객 행동 → 커맨드 → 이벤트 → 다음 이벤트
[고객] → [장바구니에 담기] → [상품이 담겼다] → [주문하기] → [주문이 접수되었다]
```

---

## Phase 3: 도메인 이벤트 도출 (90분)

### 3.1 준비 (5분)
- 화이트보드에 타임라인 표시 (왼쪽 → 오른쪽)
- 오렌지 포스트잇과 마커 배포
- 질문 시간 마련

### 3.2 이벤트 브레인스토밍 (40분)

**진행 방법:**
```
1. 조용히 개별 작업 (20분)
   - 각자 생각나는 이벤트를 포스트잇에 작성
   - 과거형으로 명확하게
   - 하나의 포스트잇에 하나의 이벤트만

2. 화이트보드에 붙이기 (20분)
   - 순서 상관없이 자유롭게 붙이기
   - 비슷한 이벤트는 가까이 배치
   - 중복되어도 OK (나중에 정리)
```

**퍼실리테이터 역할:**
- 돌아다니며 작성 독려
- 막히는 사람에게 질문으로 유도:
  - "고객이 가장 먼저 하는 일은?"
  - "그 다음에는 무슨 일이 일어나나요?"
  - "시스템이 자동으로 하는 일은?"

### 3.3 중복 제거 및 명확화 (20분)

**활동:**
- 비슷한 이벤트 찾기
- 의미가 불명확한 이벤트 질문하기
- 통합 또는 분리 결정

**질문 예시:**
- "이 이벤트는 정확히 언제 발생하나요?"
- "이 두 이벤트의 차이는 무엇인가요?"
- "이 이벤트 후에 반드시 일어나는 일은?"

### 3.4 누락된 이벤트 찾기 (25분)

**전략:**
- 각 부서별로 돌아가며 발표
- 다른 부서에서 질문
- "우리 시스템에서는 이런 일도 생기는데..." 공유

**체크 포인트:**
- [ ] 시작부터 끝까지 연결되는가?
- [ ] 예외 상황도 포함되었는가?
- [ ] 부서 간 연동 이벤트가 있는가?

---

## Phase 4: 이벤트 정렬 및 타임라인 구성 (75분)

### 4.1 시간 순서대로 정렬 (30분)

**진행 방법:**
```
1. 시작점 찾기
   - "가장 먼저 일어나는 이벤트는?"
   - 여러 시작점이 있을 수 있음 (OK)

2. 타임라인 구성
   - 왼쪽에서 오른쪽으로 흐름
   - 병렬로 일어나는 이벤트는 세로로 배치
   - 화살표로 연결 (선택사항)

3. 그룹핑
   - 비슷한 맥락의 이벤트 묶기
   - 마스킹 테이프로 영역 구분
```

**시각적 레이아웃:**
```
[고객 여정]
┌─────────┐   ┌─────────┐   ┌─────────┐
│회원가입됨│ → │로그인됨 │ → │상품검색됨│
└─────────┘   └─────────┘   └─────────┘

[주문 프로세스]
┌─────────┐   ┌─────────┐   ┌─────────┐
│장바구니  │ → │주문접수됨│ → │결제완료됨│
│추가됨   │   └─────────┘   └─────────┘
└─────────┘
              ↓
         [재고차감됨] (병렬)
```

### 4.2 핫스팟 표시 (20분)

**핫스팟을 찾는 질문:**
- "이해가 안 되는 부분이 있나요?"
- "여기서 문제가 자주 발생하지 않나요?"
- "부서 간 의견이 다른 부분은?"
- "현재 시스템의 한계는?"

**분홍 포스트잇으로 표시:**
```
🩷 "배송 지연 시 고객 통지 누락"
🩷 "재고 동기화 문제"
🩷 "결제 실패 후 처리 불명확"
```

### 4.3 전체 검토 (25분)

**Walk-through:**
- 처음부터 끝까지 소리내어 읽기
- "그래서 이런 일이 일어나고..."
- 이상한 부분 찾기
- 추가/수정

---

## Phase 5: 커맨드 및 액터 식별 (60분)

### 5.1 커맨드 추가 (30분)

**커맨드란?**
- 이벤트를 발생시키는 "행동" 또는 "명령"
- 명령형으로 표현
- 파란 포스트잇 사용

**진행 방법:**
```
1. 각 이벤트 왼쪽에 커맨드 붙이기
   - "이 이벤트가 발생하려면 어떤 행동이 필요한가?"

2. 예시:
   [주문하기] → [주문이 접수되었다]
   [결제 승인] → [결제가 완료되었다]
```

### 5.2 액터 식별 (20분)

**액터 = 커맨드를 실행하는 주체**
- 사람: 고객, 관리자, 배송기사
- 시스템: 스케줄러, 외부 API
- 정책: 자동화된 규칙

**표시 방법:**
- 작은 스티커나 아이콘으로 표시
- 또는 포스트잇 위에 직접 기입

```
[고객] 🧑 주문하기
[시스템] 🤖 재고 차감
[관리자] 👨‍💼 주문 승인
```

### 5.3 의존 관계 파악 (10분)

**질문:**
- "이 커맨드를 실행하기 전에 필요한 정보는?"
- "다른 시스템의 응답을 기다리나요?"
- "동시에 실행되면 안 되는 것은?"

---

## Phase 6: 애그리게잇 및 정책 도출 (60분)

### 6.1 애그리게잇 찾기 (35분)

**애그리게잇이란?**
- 함께 변경되는 데이터의 묶음
- 일관성 경계
- 노란 포스트잇 사용

**식별 방법:**
```
1. 이벤트와 커맨드를 보며 질문:
   - "이 명령은 어떤 데이터를 변경하나?"
   - "이 이벤트는 어떤 데이터의 상태 변화인가?"

2. 예시:
   [주문하기] → [주문서] → [주문이 접수되었다]
   [재고 차감] → [상품] → [재고가 차감되었다]
```

**배치:**
- 이벤트와 커맨드 사이에 배치
- 여러 이벤트가 같은 애그리게잇 공유 가능

### 6.2 정책/규칙 추가 (25분)

**정책이란?**
- "만약 ~하면, ~한다"
- 자동화된 비즈니스 규칙
- 연보라 포스트잇

**예시:**
```
💜 "주문 금액 10만원 이상이면 무료배송"
💜 "재고 10개 미만이면 담당자에게 알림"
💜 "3회 결제 실패 시 주문 취소"
```

**표시 방법:**
- 이벤트와 다음 커맨드 사이에 배치
- 화살표로 연결

```
[결제 완료됨] → 💜 "무료배송 조건 확인" → [배송 준비 시작]
```

---

## Phase 7: 바운디드 컨텍스트 식별 (45분)

### 7.1 컨텍스트 후보 찾기 (25분)

**바운디드 컨텍스트란?**
- 도메인 모델이 명확한 의미를 갖는 경계
- 마이크로서비스의 기본 단위

**식별 기준:**
```
1. 응집도가 높은 이벤트 그룹
   - 같은 맥락, 같은 목적

2. 다른 컨텍스트와 명확한 경계
   - 데이터 의존성 최소화

3. 조직 구조 반영
   - 담당 부서가 명확한가?

4. 변경 빈도
   - 함께 변경되는가?
```

**방법:**
- 큰 포스트잇이나 마스킹 테이프로 영역 표시
- 컨텍스트 이름 부여

**예시 컨텍스트:**
```
┌─────────────────┐  ┌─────────────────┐
│ 회원/인증       │  │ 상품 카탈로그   │
│                 │  │                 │
│ - 회원가입됨    │  │ - 상품등록됨    │
│ - 로그인됨      │  │ - 재고변경됨    │
└─────────────────┘  └─────────────────┘

┌─────────────────┐  ┌─────────────────┐
│ 주문            │  │ 결제            │
│                 │  │                 │
│ - 주문접수됨    │  │ - 결제요청됨    │
│ - 주문취소됨    │  │ - 결제완료됨    │
└─────────────────┘  └─────────────────┘
```

### 7.2 컨텍스트 간 관계 정의 (20분)

**연동 방식 표시:**
- 화살표로 방향성 표시
- 어떤 이벤트/데이터가 전달되는지 명시

```
[주문] ──주문완료 이벤트──> [결제]
       <──결제결과──────────

[주문] ──재고확인 요청────> [재고]
       <──재고수량──────────
```

**패턴 식별:**
- 고객/공급자 (Customer/Supplier)
- 공유 커널 (Shared Kernel)
- 발행된 언어 (Published Language)

---

## Phase 8: 정리 및 마무리 (30분)

### 8.1 결과 요약 (15분)

**정리할 내용:**
- 식별된 바운디드 컨텍스트 개수 및 이름
- 주요 핫스팟 목록
- 예상되는 마이크로서비스 후보

**발표 형식:**
```
오늘 우리는:
✓ XX개의 도메인 이벤트를 식별했습니다
✓ XX개의 바운디드 컨텍스트를 도출했습니다
✓ XX개의 핫스팟(개선 필요 영역)을 발견했습니다

주요 컨텍스트:
1. [컨텍스트명] - [설명]
2. [컨텍스트명] - [설명]
...
```

### 8.2 사진 촬영 및 기록 (10분)

**필수 촬영:**
- [ ] 전체 화이트보드 전경
- [ ] 각 바운디드 컨텍스트별 클로즈업
- [ ] 핫스팟 영역
- [ ] 컨텍스트 간 관계도

**디지털 기록:**
- 주요 내용 간단히 메모
- 참석자 리스트
- 주요 의사결정 사항

### 8.3 다음 단계 안내 (5분)

**후속 작업:**
```
1주일 후: 디지털화된 결과물 공유
2주일 후: 상세 분석 보고서
1개월 후: 검증 워크샵 (필요시)
```

**참석자 피드백 수집:**
- 간단한 회고
- 개선 사항
- 추가로 논의할 주제

---

## 퍼실리테이터 팁

### DO (해야 할 것)
✓ 에너지 레벨 유지 - 활기차게 진행
✓ 모든 의견 존중 - "좋은 지적입니다"
✓ 시간 관리 - 타이머 활용
✓ 참여 독려 - 조용한 사람에게 질문
✓ 비즈니스 용어 사용 - 기술 용어 최소화
✓ 시각화 - 그림, 화살표 적극 활용

### DON'T (피해야 할 것)
✗ 정답 강요 - "이건 이래야 해"
✗ 너무 깊은 토론 - 핫스팟으로 미루기
✗ 기술 구현 논의 - 도메인에 집중
✗ 완벽주의 - 80% 완성도 목표
✗ 일방적 진행 - 참석자가 주인공
✗ 중간 정리 생략 - 주기적으로 요약

### 막힐 때 사용할 질문들
```
"그래서 그 다음에는 무슨 일이 일어나나요?"
"이것은 누가 하는 일인가요?"
"이 이벤트가 왜 중요한가요?"
"실패하면 어떻게 되나요?"
"다른 부서에서는 이것을 어떻게 보시나요?"
```

---

## 트러블슈팅

### 상황 1: 참석자들이 이벤트를 잘 못 찾겠다고 할 때
**해결책:**
- 구체적인 시나리오 제시: "고객이 상품을 주문하는 과정을 생각해보세요"
- 현재 화면이나 업무 흐름도 참고
- 질문 형태로 유도: "주문 버튼을 누르면 무슨 일이 생기나요?"

### 상황 2: 너무 기술적인 이벤트가 나올 때
**해결책:**
- "이것의 비즈니스적 의미는 무엇인가요?"
- "고객 입장에서는 무슨 일이 일어난 건가요?"
- 비즈니스 이벤트로 전환 유도

### 상황 3: 의견 충돌이 발생할 때
**해결책:**
- 양쪽 의견 모두 핫스팟으로 표시
- "일단 두 가지 모두 남겨두고 나중에 논의하죠"
- 다른 참석자의 의견 요청

### 상황 4: 시간이 부족할 때
**해결책:**
- 핵심 프로세스 하나에만 집중
- 2일차 워크샵 계획
- 다음 번에 계속하기로 합의

### 상황 5: 결과가 너무 복잡할 때
**해결책:**
- 중간에 정리 시간 갖기
- 중복/불필요한 이벤트 제거
- 서브 도메인별로 나누어 진행
